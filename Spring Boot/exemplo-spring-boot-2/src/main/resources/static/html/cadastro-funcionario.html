<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>

    <header>
        <nav>
            <ul>
                <li><a href="/html/cadastro-funcionario.html">Cadastrar Funcionário</a></li>
                <li><a href="/html/lista-funcionarios.html">Listar Funcionários</a></li>
                <li><a href="/html/cadastro-departamento.html">Cadastrar Departamento</a></li>
                <li><a href="/html/lista-departamentos.html">Listar Departamentos</a></li>
            </ul>
        </nav>
    </header>

    <form id="formFuncionario">
        <label for="nome">Nome:</label>
        <input id="nome" type="text" name="nome" required><br>

        <label for="cpf">CPF:</label>
        <input id="cpf" type="text" name="cpf" required><br>

        <label for="email">Email:</label>
        <input id="email" type="email" name="email" required><br>

        <label for="senha">Senha:</label>
        <input id="senha" type="password" name="senha" required><br>

        <label for="dataNascimento">Data de Nascimento:</label>
        <input id="dataNascimento" type="date" name="dataNascimento" required><br>

        <label for="salario">Salário:</label>
        <input id="salario" type="number" step="0.01" name="salario"><br>

        <label for="gerente">Gerente:</label>
        <input id="gerente" type="checkbox" name="gerente"><br>

        <label for="pais">País:</label>
        <input id="pais" type="text" name="pais" required><br>

        <label for="estado">Estado:</label>
        <input id="estado" type="text" name="estado" maxlength="2" required><br>

        <label for="cidade">Cidade:</label>
        <input id="cidade" type="text" name="cidade" required><br>

        <label for="bairro">Bairro:</label>
        <input id="bairro" type="text" name="bairro" required><br>

        <label for="logradouro">Logradouro:</label>
        <input id="logradouro" type="text" name="logradouro" required><br>

        <label for="numero">Número:</label>
        <input id="numero" type="text" name="numero"><br>

        <label for="cep">CEP:</label>
        <input id="cep" type="text" name="cep"><br>


        <label for="departamentos">Departamento:</label>
        <select name="departamento" id="departamentos" required>
            <option value="">Selecione...</option>
        </select>
        <br>



        <button type="submit">Cadastrar</button>
    </form>



    <script>
        async function carregarDepartamentos() {
            try {
                const response = await fetch('http://localhost:8080/departamentos');
                if (!response.ok) throw new Error('Erro ao buscar departamentos');

                const departamentos = await response.json();
                const select = document.getElementById('departamentos');

                departamentos.forEach(dep => {
                    const option = document.createElement('option');
                    option.value = dep.idDepartamento;
                    option.textContent = dep.nmDepartamento;
                    select.appendChild(option);
                });
            } catch (error) {
                alert('Erro ao carregar departamentos: ' + error.message);
            }
        }

        carregarDepartamentos();
    </script>



    <script src="../js/cadastra-funcionario.js"></script>

</body>

</html>